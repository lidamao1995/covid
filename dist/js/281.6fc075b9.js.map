{"version":3,"file":"js/281.6fc075b9.js","mappings":"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","sources":["webpack://covid-19/./src/view/nucleicAcid/index.vue","webpack://covid-19/./src/api/Inspection.js","webpack://covid-19/./src/utils/distance.js","webpack://covid-19/src/view/nucleicAcid/index.vue","webpack://covid-19/./src/view/nucleicAcid/index.vue?8544","webpack://covid-19/./src/view/nucleicAcid/index.vue?0787"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"wide\",attrs:{\"id\":\"wrap\"}},[_c('baidu-map',{staticStyle:{\"display\":\"none\"},on:{\"ready\":_vm.handler}}),_c('div',{staticClass:\"banner wide\"},[_c('img',{staticClass:\"wide\",attrs:{\"src\":require(\"@/assets/images/banner_web.png\"),\"alt\":\"\"}}),_c('newFlash'),_c('div',{staticClass:\"level\",on:{\"click\":_vm.onlevel}},[_c('span',[_vm._v(_vm._s(_vm.city))]),_c('span',[_vm._v(_vm._s(_vm.area))]),_c('i',{staticClass:\"iconfont icon-xiala2\"})])],1),_c('div',{staticClass:\"amap-page-container\",attrs:{\"id\":\"container\"}},[_c('el-amap',{ref:\"map\",attrs:{\"vid\":\"amapDemo\",\"amap-manager\":_vm.amapManager}},[_c('el-amap-marker')],1)],1),(_vm.nucleShow)?_c('div',{staticClass:\"wide nucleicMechanism\"},[_c('div',{staticClass:\"infohospital\"},[_c('div',{staticClass:\"MechanismDistance\"},[_c('div',{staticClass:\"detail-title\"},[_vm._v(_vm._s(_vm.cityItem.title))]),_c('div',{staticClass:\"detail-location\"},[_c('span',[_vm._v(\"距你\"+_vm._s(_vm.cityItem.d)+\"公里\")]),_vm._v(\" | \"),_c('span',[_vm._v(_vm._s(_vm.cityItem.address))])]),_c('div',{staticClass:\"tel\"},[_c('i',{staticClass:\"iconfont icon-dianhuatianchong\"}),_c('a',{attrs:{\"href\":'tel:' + _vm.cityItem.tel}},[_vm._v(_vm._s(_vm.cityItem.tel))])])]),_c('div',{staticClass:\"businessTime\"},[_vm._v(\"营业时间：\"+_vm._s(_vm.cityItem.opentime_today))])]),_vm._m(0)]):_vm._e(),_c('button',{staticClass:\"viewlist\",on:{\"click\":function($event){_vm.listShow = true}}},[_vm._v(\"查看机构列表\")]),_c('van-popup',{style:({ height: '30%' }),attrs:{\"position\":\"bottom\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-picker',{attrs:{\"show-toolbar\":\"\",\"title\":\"\",\"columns\":_vm.columns},on:{\"confirm\":_vm.onConfirm,\"cancel\":function($event){_vm.show = false}}})],1),_c('van-popup',{attrs:{\"position\":\"bottom\",\"round\":\"\"},model:{value:(_vm.listShow),callback:function ($$v) {_vm.listShow=$$v},expression:\"listShow\"}},[_c('div',{staticClass:\"mechList\"},[_c('div',{staticClass:\"bottom-list-header\"},[_c('div',{staticClass:\"mech-title d-flex d-cont-between\"},[_c('span',[_vm._v(\"等待时长\")]),_c('span',{staticClass:\"title\"},[_vm._v(\"核酸检测机构\")]),_c('span',{staticClass:\"iconfont icon-31guanbi\",on:{\"click\":function($event){_vm.listShow = false}}})]),_c('div',{staticClass:\"bottom-list-location d-flex d-cont-between align-item\"},[_c('p',{staticClass:\"location\"},[_vm._v(_vm._s(_vm.city)+\" \"+_vm._s(_vm.area))]),_c('p',{staticClass:\"bottom-list-count\"},[_vm._v(\"该区域共\"),_c('span',[_vm._v(_vm._s(_vm.mechanismList.length))]),_vm._v(\"家核酸检测机构\")])]),_c('div',{staticClass:\"bottom-list-screen d-flex d-cont-between\"},_vm._l((_vm.screeninfo),function(item,index){return _c('p',{class:item.active?'active':'',on:{\"click\":function($event){return _vm.clickScreen(item.type,index)}}},[_vm._v(\" \"+_vm._s(item.text)+\" \")])}),0)]),_c('ul',_vm._l((_vm.list),function(item,index){return _c('li',{key:index},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"mechDistance\"},[_vm._v(\" \"+_vm._s(item.d)+\"公里 | \"+_vm._s(item.address)+\" \")]),_c('div',{staticClass:\"tel\"},[_c('a',{attrs:{\"href\":'tel:' + item.tel}},[_vm._v(_vm._s(item.tel))])]),_c('div',{staticClass:\"businesshours\"},[_vm._v(\" \"+_vm._s(item.opentime_today)+\" \")]),_c('p',{staticClass:\"iconfont icon-ditu-dibiao\",on:{\"click\":function($event){return _vm.inquiryOrgani(item.lat,item.lng)}}})])}),0)])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"moreMechanism\"},[_vm._v(\" 更多机构 \"),_c('i',{staticClass:\"iconfont icon-gengduo\"})])\n}]\n\nexport { render, staticRenderFns }","import http  from '@/http/index'\r\nexport const inspection  = () => http.get(\"/relation_code.json\");\r\nexport const latitude  = (cityCode) => http.get(\"/news/ncp/data.d.json?mod=nucleic_acidgeo&adcode=\"+ cityCode +\"&type=county&_=1665371508671\");\r\nexport const lanAndLat  = (cityCode) => http.get(\"news/ncp/data.d.json?mod=city_lnglat&adcode=\"+ cityCode +\"&_=1665462787342\");\r\n","function rad(d) {\r\n  return d * Math.PI / 180.0;\r\n}\r\n\r\nexport function getDistance(lat1, lng1, lat2, lng2) {\r\n  var radLat1 = rad(lat1);\r\n  var radLat2 = rad(lat2);\r\n  var a = radLat1 - radLat2;\r\n  var b = rad(lng1) - rad(lng2);\r\n  var s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) +\r\n    Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)));\r\n  s = s * 6378.137; // EARTH_RADIUS;\r\n  s = Math.round(s * 10000) / 10000; //输出为公里\r\n\r\n  var distance = s;\r\n  var distance_str = \"\";\r\n  if (parseInt(distance) >= 1) {\r\n    distance_str = distance.toFixed(1) + \"km\";\r\n  } else {\r\n    distance_str = distance * 1000 + \"m\";\r\n  }\r\n  s = s.toFixed(2);\r\n  // console.info('lyj 距离是', s);\r\n  // console.info('lyj 距离是', distance_str);\r\n  return s;\r\n}","<template>\r\n  <div id=\"wrap\" class=\"wide\">\r\n    <baidu-map style=\"display:none;\" @ready=\"handler\">\r\n    </baidu-map>\r\n    <div class=\"banner wide\">\r\n      <img class=\"wide\" src=\"@/assets/images/banner_web.png\" alt=\"\">\r\n      <!-- 新闻 -->\r\n      <newFlash />\r\n      <div class=\"level\" @click=\"onlevel\">\r\n        <span>{{city}}</span>\r\n        <span>{{area}}</span>\r\n        <i class=\"iconfont icon-xiala2\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"amap-page-container\" id=\"container\">\r\n      <el-amap vid=\"amapDemo\" ref=\"map\" :amap-manager=\"amapManager\">\r\n        <!-- 遍历当前点坐标组markers 开始标点 -->\r\n        <el-amap-marker></el-amap-marker>\r\n      </el-amap>\r\n    </div>\r\n\r\n    <div class=\"wide nucleicMechanism\" v-if=\"nucleShow\">\r\n      <div class=\"infohospital\">\r\n        <div class=\"MechanismDistance\">\r\n          <div class=\"detail-title\">{{cityItem.title}}</div>\r\n          <div class=\"detail-location\">\r\n            <span>距你{{cityItem.d}}公里</span> |\r\n            <span>{{cityItem.address}}</span>\r\n          </div>\r\n          <div class=\"tel\">\r\n            <i class=\"iconfont icon-dianhuatianchong\"></i>\r\n            <a :href=\"'tel:' + cityItem.tel\">{{cityItem.tel}}</a>\r\n          </div>\r\n        </div>\r\n        <div class=\"businessTime\">营业时间：{{cityItem.opentime_today}}</div>\r\n      </div>\r\n      <div class=\"moreMechanism\">\r\n        更多机构\r\n        <i class=\"iconfont icon-gengduo\"></i>\r\n      </div>\r\n    </div>\r\n\r\n    <button class=\"viewlist\" @click=\"listShow = true\">查看机构列表</button>\r\n    <van-popup v-model=\"show\" position=\"bottom\" :style=\"{ height: '30%' }\">\r\n      <van-picker show-toolbar title=\"\" :columns=\"columns\" @confirm=\"onConfirm\" @cancel=\"show = false\" />\r\n    </van-popup>\r\n\r\n    <van-popup v-model=\"listShow\" position=\"bottom\" round>\r\n      <div class=\"mechList\">\r\n        <div class=\"bottom-list-header\">\r\n          <div class=\"mech-title d-flex d-cont-between\">\r\n            <span>等待时长</span>\r\n            <span class=\"title\">核酸检测机构</span>\r\n            <span class=\"iconfont icon-31guanbi\" @click=\"listShow = false\"></span>\r\n          </div>\r\n          <div class=\"bottom-list-location d-flex d-cont-between align-item\">\r\n            <p class=\"location\">{{city}} {{area}}</p>\r\n            <p class=\"bottom-list-count\">该区域共<span>{{mechanismList.length}}</span>家核酸检测机构</p>\r\n          </div>\r\n          <div class=\"bottom-list-screen d-flex d-cont-between\">\r\n            <p  \r\n            v-for=\"(item , index) in screeninfo\" \r\n            @click=\"clickScreen(item.type,index)\"\r\n            :class=\"item.active?'active':''\"\r\n            >\r\n              {{item.text}}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <ul>\r\n          <li v-for=\"(item,index) in list\" \r\n          :key=\"index\">\r\n            <div class=\"title\">{{item.title}}</div>\r\n            <div class=\"mechDistance\">\r\n              {{item.d}}公里 | {{item.address}}\r\n            </div>\r\n            <div class=\"tel\">\r\n              <a :href=\"'tel:' + item.tel\">{{item.tel}}</a>\r\n            </div>\r\n            <div class=\"businesshours\">\r\n              {{item.opentime_today}}\r\n            </div>\r\n\r\n            <p class=\"iconfont icon-ditu-dibiao\" @click=\"inquiryOrgani(item.lat,item.lng)\"></p>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { AMapManager, lazyAMapApiLoaderInstance } from 'vue-amap';\r\nlet amapManager = new AMapManager();//获取高德原生 AMap.Map\r\n\r\nimport { inspection, latitude, lanAndLat } from '@/api/Inspection';\r\nimport { getDistance } from '@/utils/distance';\r\nimport newFlash from '@/components/newsFlash.vue';\r\nlet img = require(\"@/assets/images/epidemic_icon.png\");\r\nlet deeplevel = require(\"@/assets/images/deeplevel.png\");\r\nexport default {\r\n  // name: 'map',\r\n  data() {\r\n    let self = this;\r\n    return {\r\n      city: \"北京市\",\r\n      area: \"东城区\",\r\n      infoArea: {},\r\n      // 缩放级别  \r\n      zoom: 12,\r\n      list: [],\r\n      mechanismList:[],\r\n      show: false,\r\n      amapManager,\r\n      // 定义点坐标组数组 \r\n      center: [\"116.416334\", \"39.928359\"],\r\n      columns: [],\r\n      cityItem: {},\r\n      screeninfo:[\r\n        {text:'3公里内',type:0,active:false},\r\n        {text:'排队<15分钟',type:1,active:false},\r\n        {text:'24小时营业',type:2,active:false},\r\n        {text:'医院',type:3,active:false},\r\n        {text:'常态检测点',type:4,active:false},\r\n      ],\r\n      nucleShow: false,\r\n      listShow: false,\r\n      baidulng: '',\r\n      baidulat: ''\r\n    };\r\n  },\r\n  created() {\r\n    this.nucleicAcidTest();\r\n    this.latitudeGet('CN11010100000000');\r\n  },\r\n  components: {\r\n    newFlash\r\n  },\r\n  methods: {\r\n    // 添加点聚合 \r\n    initMarkers() {\r\n      let self = this;\r\n      // 初始化聚合列表和点的列表\r\n      let cluster, markers = [];\r\n      var map = null;\r\n      lazyAMapApiLoaderInstance.load().then(() => {\r\n        map = new AMap.Map(\"container\", {\r\n          resizeEnable: true,\r\n          center: self.center,\r\n          zoom: 12,\r\n          resizeEnable: true,\r\n          mapStyle: \"light\",\r\n        });\r\n        this.toolBarGet(map);\r\n        this.gaodePositioning(map);\r\n        map.on('click', function (e) {\r\n          self.nucleShow = false;\r\n        });\r\n      })\r\n      // 循环读取每一个点的经纬度信息\r\n      lazyAMapApiLoaderInstance.load().then(() => {\r\n        this.list.forEach((item) => {\r\n          let marker = new AMap.Marker({\r\n            position: [item.lng, item.lat],\r\n            content: '<img width=\"20\" height=\"\" src=\"' + deeplevel + '\"/>',\r\n          })\r\n          // 给marker点坐标添加额外的属性和对应的属性值，圈重点这里是关键\r\n          marker.setExtData([item.lng, item.lat])\r\n          // 给每个点坐标绑定click事件，这里是实现点击功能的重点\r\n          marker.on('click', this.clickPolymerization)\r\n          markers.push(marker);\r\n        })\r\n        let count = markers.length;\r\n        // 设置聚合样式，这里都是聚合样式的配置\r\n        let _renderClusterMarker = function (context) {\r\n          let div = document.createElement('div');\r\n          div.style.background = 'url(' + img + ') center center'\r\n          div.style.backgroundSize = 'cover'\r\n          let size = Math.round(30 + Math.pow(context.count / count, 1 / 5) * 20);\r\n\r\n          div.style.width = div.style.height = 30 + 'px';\r\n          div.innerHTML = context.count;\r\n          div.style.lineHeight = 25 + 'px';\r\n          div.style.color = '#fff';\r\n          div.style.fontSize = '14px';\r\n          div.style.textAlign = 'center';\r\n          context.marker.setOffset(new AMap.Pixel(-size / 2, -size / 2));\r\n          context.marker.setContent(div)\r\n        };\r\n        // 调用函数添加点聚合功能\r\n        addCluster();\r\n        function addCluster() {\r\n          if (cluster) {\r\n            cluster.setMap(null);\r\n          } else {\r\n\r\n            setTimeout(() => {\r\n              // 如果不设置renderClusterMarker，聚合点为默认样式\r\n              AMap.plugin([\"AMap.MarkerClusterer\"], function () {\r\n                cluster = new AMap.MarkerClusterer(map, markers, {\r\n                  gridSize: 30,\r\n                  minClusterSize: 1,\r\n                  maxZoom: 13,\r\n                  averageCenter: true,\r\n                  renderClusterMarker: _renderClusterMarker,\r\n                  zoomOnClick: true\r\n                });\r\n              });\r\n            }, 400)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    onlevel() {\r\n      this.show = true;\r\n    },\r\n    // 使用高德获取定位\r\n    gaodePositioning(map) {\r\n      let self = this;\r\n      map.plugin('AMap.Geolocation', function () {\r\n        let geolocation = new AMap.Geolocation({\r\n          enableHighAccuracy: true,//是否使用高精度定位，默认:true\r\n          timeout: 2000,          //超过10秒后停止定位，默认：无穷大\r\n          showCircle: false,        //定位成功后用圆圈表示定位精度范围，默认：true\r\n        });\r\n\r\n        map.addControl(geolocation);\r\n        // 自动定位\r\n        geolocation.getCurrentPosition();\r\n        //返回定位信息\r\n        AMap.event.addListener(geolocation, 'complete', (info) => {\r\n          console.log(info);\r\n          self.calculateDistance(info.position.lat, info.position.lng)\r\n        });\r\n        //返回定位出错信息\r\n        AMap.event.addListener(geolocation, 'error', (error) => {\r\n          self.calculateDistance(self.baidulat, self.baidulng)\r\n        });\r\n      })\r\n    },\r\n    // 百度定位\r\n    handler({ BMap, map }) {\r\n      const that = this;\r\n      // 获取自动定位方法\r\n      var geolocation = new BMap.Geolocation();\r\n      // 获取自动定位获取的坐标信息\r\n      geolocation.getCurrentPosition(\r\n        function (r) {\r\n          that.baidulng = r.longitude;\r\n          that.baidulat = r.latitude;\r\n        },\r\n        { enableHighAccuracy: true }\r\n      );\r\n    },\r\n    //使用地图控件\r\n    toolBarGet(map) {\r\n      AMap.plugin([\"AMap.ToolBar\"], function () {\r\n        let tool = new AMap.ToolBar({\r\n          liteStyle: true,\r\n          offset: new AMap.Pixel(10, 300)\r\n        });\r\n        map.addControl(tool);\r\n      });\r\n    },\r\n    // 获取省-市-区(县)\r\n    async nucleicAcidTest() {\r\n      let nucleicacidData = await inspection();\r\n      this.columns = nucleicacidData.data.list;\r\n    },\r\n    // 获取核酸检测机构\r\n    async latitudeGet(cityCode) {\r\n      let latitudeData = await latitude(cityCode);\r\n      this.list = latitudeData.data.list;\r\n      this.initMarkers();\r\n    },\r\n    // 获取区的经纬度\r\n    async lanAndLatGet(cityCode) {\r\n      let lanAndLatdData = await lanAndLat(cityCode);\r\n      let { lng, lat } = lanAndLatdData.data.data[0].location\r\n      this.center = [lng, lat]\r\n    },\r\n    onConfirm(e, val) {\r\n      let that = this;\r\n      this.show = false;\r\n      this.city = e[1]\r\n      this.area = e[2]\r\n      let cityCode = this.columns[val[0]].children[val[1]].children[val[2]].code;\r\n      // 获取区的经纬度\r\n      this.lanAndLatGet(cityCode);\r\n      this.list = [];\r\n      // 获取核酸检测机构\r\n      this.latitudeGet(cityCode);\r\n    },\r\n    // 点击点标记获取相关位置\r\n    clickPolymerization(e) {\r\n      let latAndlng = e.target.De.extData\r\n      this.list.forEach(item => {\r\n        if (latAndlng[0] == item.lng && latAndlng[1] == item.lat) {\r\n          this.cityItem = item;\r\n        }\r\n      });\r\n      this.nucleShow = true;\r\n    },\r\n    // 计算距离最近的位置\r\n    calculateDistance(lat1, lng1) {\r\n      let list = [];\r\n      // 根据经纬度计算距离，参数分别为第一点的纬度，经度；第二点的纬度，经度\r\n      this.list.forEach((item) => {\r\n        item.d = getDistance(lat1, lng1, parseFloat(item.lat), parseFloat(item.lng))\r\n        list.push(item);\r\n      })\r\n      this.nucleShow = true;\r\n      this.cityItem = list.reduce((res, obj) => (obj.d < res.d) ? obj : res);\r\n      this.list = list;\r\n      this.mechanismList = list;\r\n\r\n    },\r\n    inquiryOrgani(lat ,lng){\r\n      // this.listShow = false;\r\n      \r\n      // this.center = [lng,lat];\r\n      // // console.log(lat,lng);\r\n      \r\n    },\r\n    clickScreen(type,index){\r\n      this.screeninfo.forEach((item,i)=>{\r\n          index === i ?(item.active?item.active = false:item.active= true) : item.active = false;\r\n      })\r\n      let isHas = this.screeninfo.some(item =>item.active)\r\n      let list = [];\r\n      const actions = new Map([\r\n          [0, () => {\r\n            list = this.mechanismList.filter(item =>{item.d < 3})\r\n          }],\r\n          [1, () => {\r\n            list = this.mechanismList.filter(item =>{item.wait_time < 15})\r\n          }],\r\n          [2, () => {\r\n            list = this.mechanismList.filter(item =>{item.twenty_four_hours == 24})\r\n          }],\r\n          [3, () => {\r\n           list = this.mechanismList.filter(item =>item.title.indexOf('医院') !==-1)\r\n          }],\r\n          [4, () => {\r\n            list = this.mechanismList.filter(item =>{item.rectag == ''})\r\n          }],\r\n      ]);\r\n      \r\n      actions.get(type).call(this);\r\n      isHas ? this.list = list: this.list = this.mechanismList  \r\n      \r\n      \r\n    }\r\n  },\r\n}\r\n\r\n\r\n</script>    \r\n<style lang=\"less\" scoped>\r\n\r\n#wrap {\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  top: 0;\r\n  background: #FFF;\r\n  position: relative;\r\n\r\n  .banner {\r\n    position: fixed;\r\n    z-index: 6;\r\n    top: 0;\r\n  }\r\n\r\n  .level {\r\n    height: 70px;\r\n    background-color: #FFF;\r\n    border-radius: 8px;\r\n    padding: 0 16px 0 24px;\r\n    position: absolute;\r\n    z-index: 1;\r\n    box-shadow: 1px 1px 6px 0 rgb(0 0 0 / 30%);\r\n    margin-top: 30px;\r\n    font-size: 26px;\r\n    margin-left: 30px;\r\n    line-height: 70px;\r\n    display: flex;\r\n    justify-content: space-around;\r\n\r\n  }\r\n\r\n  .nucleicMechanism {\r\n    width: 750px;\r\n    position: fixed;\r\n    background-color: #FFF;\r\n    box-shadow: 0 0 28px 0 rgb(0 0 0 / 30%);\r\n    border-radius: 20px;\r\n    bottom: 162px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    .infohospital {\r\n      padding: 30px;\r\n\r\n      .MechanismDistance {\r\n        .detail-title {\r\n          font-size: 36px;\r\n          color: #111;\r\n          font-weight: 700;\r\n          -webkit-user-select: text;\r\n          -moz-user-select: text;\r\n          -ms-user-select: text;\r\n          user-select: text;\r\n        }\r\n\r\n        .detail-location {\r\n          margin-top: 10px;\r\n          font-size: 24px;\r\n          color: #444;\r\n          display: block;\r\n          line-height: 32px;\r\n        }\r\n\r\n        .tel {\r\n          padding-bottom: 16px;\r\n          border-bottom: 1px solid #eee;\r\n\r\n          margin-right: 30px;\r\n          font-size: 28px;\r\n\r\n          i {\r\n            color: #357bdf;\r\n          }\r\n\r\n          a {\r\n            text-decoration: none;\r\n            color: #357bdf;\r\n          }\r\n        }\r\n      }\r\n\r\n      .businessTime {\r\n        color: #888;\r\n        margin-top: 16px;\r\n        font-size: 26px;\r\n      }\r\n    }\r\n\r\n    .moreMechanism {\r\n      width: 60px;\r\n      text-align: center;\r\n      font-size: 24px;\r\n      color: #357bdf;\r\n      background-color: rgba(53, 123, 223, .05);\r\n      writing-mode: tb-rl;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n\r\n      letter-spacing: 12px;\r\n    }\r\n  }\r\n\r\n  .viewlist {\r\n    position: fixed;\r\n    left: 50%;\r\n    z-index: 4;\r\n    bottom: 68px;\r\n    transform: translateX(-50%);\r\n    width: 330px;\r\n    line-height: 76px;\r\n    background: #4d79f3;\r\n    border-radius: 38px;\r\n    font-size: 30px;\r\n    color: #fff;\r\n    text-align: center;\r\n  }\r\n\r\n  .mechList {\r\n    height: 1098px;\r\n    overflow-y: scroll;\r\n    background-color: #EEEEEE;\r\n    .bottom-list-header{\r\n      padding:30px 0;\r\n      background-color: #FFF;\r\n      .mech-title{\r\n      \r\n      padding:0 30px;\r\n      .title{\r\n        font-size:36px;\r\n        color: #111;\r\n        font-weight: 700;\r\n      }\r\n      .iconfont{\r\n        font-size:36px;\r\n        color: #111 !important;\r\n      }\r\n      }\r\n      .bottom-list-location{\r\n        padding:0 30px;\r\n        padding-top:30px;\r\n        \r\n        background-color: #FFF;\r\n        .location{\r\n          font-size:32px;\r\n              color: #111;\r\n              font-weight: 700;\r\n          }\r\n          .bottom-list-count{\r\n            font-size:26px;\r\n            color: #888;\r\n            span{\r\n              color: #fe350e;\r\n                  margin: 0 10px;\r\n                  vertical-align: middle;\r\n              }\r\n            }\r\n          }\r\n      .bottom-list-screen{\r\n        background-color: #FFF;\r\n        padding-top:30px;\r\n        overflow-x: scroll;\r\n        width:750px;\r\n          .active{\r\n            border-color: #357bdf;\r\n            color: #357bdf;\r\n            background: rgba(53,123,223,.08);\r\n          }\r\n          p{\r\n            padding:10px 20px;\r\n            background: #f5f5f5;\r\n            border: 2px solid rgba(0,0,0,0);\r\n            border-radius:8px;\r\n            margin-right:14px;\r\n            flex: none;\r\n            -webkit-box-flex: 0;\r\n          }\r\n          p:first-child{\r\n            margin-left: 30px;\r\n          }\r\n        }\r\n        .bottom-list-screen::-webkit-scrollbar { width: 0; height: 0; color: transparent; }\r\n      }\r\n\r\n\r\n    ul {\r\n      li {\r\n        padding: 30px;\r\n        box-sizing: border-box;\r\n        -webkit-box-flex: 0;\r\n        flex: none;\r\n        display: block;\r\n        position: relative;\r\n        background-color: #FFF;\r\n        margin-top:10px;\r\n        padding-right:80px;\r\n        .title{\r\n          font-size: 32px;\r\n          color: #111;\r\n          font-weight: 700;\r\n          user-select: text;\r\n        }\r\n        .mechDistance{\r\n          margin-top:10px;\r\n              color: #444;\r\n              font-size:28px;\r\n              display: block;\r\n          }\r\n        .tel{\r\n          margin-top:10px;\r\n          a{\r\n            color: #357bdf;\r\n            margin-right:30px;\r\n            font-size:30px;\r\n            text-decoration: none;\r\n          }\r\n        }\r\n\r\n        .businesshours{\r\n          font-size:24px; \r\n          border-top: 2px solid #eee;\r\n          padding-top:16px;\r\n          margin-top:16px;\r\n          color: #888;\r\n        }\r\n        p{\r\n          position:absolute;\r\n          color: #FD5143;\r\n          top:50%;\r\n          font-size:60px;\r\n          transform: translateY(-80%);\r\n          right:20px;\r\n        }\r\n        }\r\n      }\r\n    }\r\n  \r\n\r\n  .demo-affix {\r\n    background-color: #f1c40f;\r\n    padding: 10px 20px;\r\n    color: white;\r\n    position: absolute;\r\n    z-index: 999;\r\n  }\r\n\r\n  //地图为异步加载，需要为容器设置高度，否则地图无法显示\r\n  .amap-page-container {\r\n    height: 100vh;\r\n  }\r\n\r\n  .toggle-img {\r\n    width: 80px;\r\n    height: 80px;\r\n    position: absolute;\r\n    left: 5px;\r\n    color: red;\r\n    z-index: 999;\r\n    font-size: 40px;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5902b861&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5902b861&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5902b861\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","staticStyle","on","handler","require","onlevel","_v","_s","city","area","ref","amapManager","nucleShow","cityItem","title","d","address","tel","opentime_today","_m","_e","$event","listShow","style","height","model","value","show","callback","$$v","expression","columns","onConfirm","mechanismList","length","_l","screeninfo","item","index","class","active","clickScreen","type","text","list","key","inquiryOrgani","lat","lng","staticRenderFns","inspection","http","latitude","cityCode","lanAndLat","rad","Math","PI","getDistance","lat1","lng1","lat2","lng2","radLat1","radLat2","a","b","s","asin","sqrt","pow","sin","cos","round","distance","parseInt","toFixed","AMapManager","img","deeplevel","data","infoArea","zoom","center","baidulng","baidulat","created","components","newFlash","methods","initMarkers","lazyAMapApiLoaderInstance","map","resizeEnable","mapStyle","self","position","content","marker","markers","div","context","cluster","setTimeout","AMap","gridSize","minClusterSize","maxZoom","averageCenter","renderClusterMarker","zoomOnClick","addCluster","gaodePositioning","enableHighAccuracy","timeout","showCircle","geolocation","console","BMap","that","toolBarGet","liteStyle","offset","clickPolymerization","calculateDistance","actions","isHas","component"],"sourceRoot":""}